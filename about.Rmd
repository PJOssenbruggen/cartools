---
title: "Fundamentals"
---


```{r, include = FALSE, warning = FALSE, message = FALSE, error = FALSE}
library(Basic)
```


## 1. Overview 
 
The __TFUHP__ package is designed for college students studying transportation engineering and for transportation professionals and researchers interested in understanding the complex relationships associated with freeway performance and traffic breakdown. Newtons Laws of dynamics, fundamentals of trafic flow theory (TFT), probabilistic modeling and statistics are used in this package. By building upon current knowledge - the "classical methods" of transportation analysis - and integrating them with the latest computer tools, the goal is to identify key factors that initiate a breakdown event.  Emphasize is placed on:

##### Traffic noise or _traffic volatility_.

##### Driver behavior and safety.

##### Using stochastic models that explain breakdown.

The principal aim of this vignette is to explain highway performance as simply as possible. Topics are introduced in a  step-by-step manner.  Exploratory data analyses of a freeway bottleneck, inspecting a YouTube video of vehicles traveling on a ring road, and using the core assumptions of TFT are used for example.   The principal product of this effort is the development of a traffic flow model:

* $Q = f(k, u, \sigma, h)$

where $k$ is traffic density, $u$ is  speed, and $h$ is a headway.  Since traffic is a noisy process, speed  is treated as a random variable $U$, a function of both $u$ and  $\sigma$. The overall  volatility observed in the process  is specifified by $\sigma$, a measure of driver group dynamics and other uncerainties.  The variable  $h$, _safe distance headway_,  reflects the drivers' aversion to risk and vehicle length. Since $h$ is a safe distance headway,  no crashes are permitted.  Thus,  $Q$ is a random variable and an important measure of highway performance. The  $Q$ model is a _parsimonius, stochastic model._


## 2. Traffic Noise or Volatility 

A quick read of the __Overview__ may give the impression that the approach, a package of computer algorithms, will be difficult to understand and overwhelming to implement. Words, like complex, dynamics, theory, parsimonious, stochastic and model integration can be daunting. No question that designing and operating a transportation system are difficult problems. By disecting the problem into manageable pieces and synthesizing the  results from the individual pieces brings clarity to the process. 

Consider a "toy" example using  _sequential-demand-forecasting. It is a 4-step approach. Questions associated with (1) _trip generation_, (2) _trip distribution_, (3) _modal-split_, and _trip assignment_ are asked.  Our task is to  improve an existing campus transporation system. This is no small task, especially when budgetary constraints are imposed. Suppose we obtained the following responses:

_Trip generation_, "What is the purpose of your trip?" Work, shopping, entertainment, doctor's visit, etc. and of course, returning home after completing these activites. Since our problem, deals traveling on campus, we  interview 10 students in this "toy" example. To further simplify the problem,  we assume that all students are together in the same classroom. The answers range to my next class in a different building, study hall, dining hall, etc. The answers, you can see, can be anticipated. You can see that answers are dependent on the time of day and may include  other factors. 

_Trip distribution_, "Where do you want to go?" Thus, for the students, we need to know the locations of class rooms, study halls, dining halls, etc. 

_Modal-split_, "What means of transporation will you use?" Walk, bicycle, auto, bus. For the general public, answers  include taxi, Uber, train, boat and airplane.

_Trip assignment_, "What route will you use?" Answers include sidewalks, local streets, boulevards, freeways, waterways, and the airways. 

To build a system for a campus with hundreds or thousands of students, more people will be interviewed. Of course, not all students, faculty, staff and administrators on the campus need to be interviewed. While a sample of 10 students is insufficient, a  _representative sample_ will suffice. A most important point, even for this "toy" example, is the need for quality data. Once obtained, statistical analysis  can be used to extract critical information from the data and to build predictive models.

## 3. Visualizing the  Problem 

The [trfhp](https://github.com/PJOssenbruggen/Basic) package is  a collection of [R](https://www.r-project.org) functions and libraries. This  wide variety of statistical and graphical techniques are made available through the open-source [cran](https://cran.r-project.org) network.  The aim is to use these tools to  better understand freeway performance and traffic breakdown.  Computer simulation, enhanced graphics including animation, and sensitivity analysis are  used in the [trfhp](https://github.com/PJOssenbruggen/Basic) package.  For example, [ggplot2](http://ggplot2.org) from [Rstudio](https://www.rstudio.com/products/rpackages/)  is used to produce the animation presented below. [Shiny](http://shiny.rstudio.com) is used to build interactive web applications for conducting sensitivity analyses. 

Let's look again at trip generation. This time, we will incorporate visual imagry into the discussion. Before the interview, we don't know if the students will travel north, south, east or west or how far they will travel. We do know that they are all located at the same place initially and when the class ends that they will disperse. A [R](https://www.r-project.org) _Brownian motion model_, a time-dependent stochastic model, can simulate this behavior.  At time $t$ = 0, the students are  located at the point $(x = 0, y = 0)$. They become more dispersed as time progresses. Robert Brown, a botanist, described this chaotic motion of a grain of pollen suspended in water. This model is used by economists and physicists [@sde] [@iacus]. 


```{r tripdispersion,  message = FALSE, fig.height = 4, fig.width = 4, echo = FALSE}
library(ggplot2)
p1 <- tripdispersion(20, 123)
p2 <- tripdispersion(20, 002)
par(mfrow = c(1,2))
p1
p2
```

The mathematics behind the animation is relatively simple. Of course, the Brownian motion model shown here can be adapted to other situtations. This will be  illustrated presently. The ultimate aim of using [trfhp](https://github.com/PJOssenbruggen/Basic) package tools is to improve our chances of mitigating congestion and improving performance using the simple mathematical and graphical tools.