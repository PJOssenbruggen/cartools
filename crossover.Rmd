---
title: "Crossover"
bibliography: "CF.bibtex"
---

***
[^1]: The __cartools__ functions __crossconflict__, __safecrossover__ and __plotcrossover__ are used to create the plots shown on this page. 

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r, include = FALSE, warning = FALSE, message = FALSE, error = FALSE}
library(Basic)
```

__Lane Changing on a Two-lane Freeway__


Our attention has focused explaining traffic breakdown at a bottleneck. Drivers, who change lanes on a two-lane roadway, can cause traffic breakdown and congestion.  No question drivers must use care when changing lanes to avoid a crash or a near miss. In the simulation shown on this page, we investigate a situation where two drivers are driving side-by-side in lanes 1 and 2. We also assume that the drivers are traveling at identical speeds of $u$ = 67 mph and both decide to change lanes at the same time. Driver 1 moves right from lane 1 to 2 and driver 2 moves left from lane 2 to l. If neither driver yields, then a crash occurs as shown below at the "crossover point." 


```{r crossconflict, echo=FALSE, fig.height=4, fig.width=8, message=TRUE, warning=TRUE}
par(mfrow = c(1,2))
library(Basic)
cartools::crossconflict()
df <- cartools::safecrossover(67,14)
#print(df)
```

To avoid a crash, the driver on lane 2 yields as shown. Driver 2 slows down and allows driver 1 to pass in front of his/her vehicle. Driver 1 maintains a speed of 67 mph.  A crash is avoided. Here we show the driver in the following vehicle to crossover a "safe distance" behind the leader. 

What is a "safe distance?" Since we don't have field measures, we base our assumption and justify it based our experience as a driver. The distance headway is assumed to be 28 feet or two car lengths. In other words, the distance between the back bumper of the lead vehicle and  front bumper of our vehicle is one vehicle length or 14 feet. Some people may criticize it as being too close given the speeds of two vehicles are 67 mph. However, the relative speed between vehicles  is zero.  Are the critics right in claiming that we are not cautious enough? 

```{r plotcrossover, echo=FALSE, fig.height=5, fig.width=5, message=TRUE, warning=TRUE}
par(mfrow = c(1,1))
library(Basic)
library(ggplot2)
cartools::plotcrossover(67,14)
```

To address the issue, we will investigate our speed and acceleration using the $t-x$ trajectory shown above. Note that the speeds on the plot are shown in feet per second. The relative size of the speed bullets give the impression that we may decelerating at a high rate, suggesting that we may be introducing unsafe condition. At around $t$ = 5 seconds, our speed drops to 56 mph (82 fps) and at around $t$ = 7.5, our speed reaches a maximum of 78 mph (115 fps).  Our acceleration is approximately 8.8 feet per second-square. The accelerate rate is considered comfortable, so we argue that our weave is safe. After all, we are assuming that we are not under the influence of alcohol or drugs, which is obviously against the law.

By the way, a more cautious driver of lane 2 may slow to 56 mph and remain in the lane. 

__Traffic Breakdown and Queue Formation__

While we slowdown "safely," the potential for a traffic breakdown resulting from a crossover by one or two vehicles is evident. Imagine if more vehicles were on the road and our vehicle in lane 2 decelerated as described. Its effect would progress upstream, causing following vehicles to slow. 

The code will be upgraded to include more following vehicles. At the same time, the code for creating the __Conflict__ and __Safe Crossover__ overhead diagrams will be updated. Vehicles  do not follow straight-line trajectories, but curved ones. 

__Roadway Geometry__

```{r roadentrance,  message = FALSE, fig.height = 6, fig.width = 10, echo = FALSE}
x <- c(0,2,2,0,24,26,28,52,50,50,52,28,26,24,0)/40
xfeet <- x*40
y <- c(0,1000,4000,5000,5000,4000,5000,5000,4000,1000,0,0,1000,0,0)/200
df <- data.frame(x,y,xfeet)
op <- par(mfrow = c(1,1), pty = "s")
plot(df[,1], df[,2], typ = "n", axes = FALSE, xlab = "", ylab = "", xlim = c(0, 2.5))
polygon(df[,1], df[,2], col = gray(0.8), border = NA)
lines(df[1:4,1],df[1:4,2])
lines(df[5:7,1],df[5:7,2])
lines(df[8:11,1],df[8:11,2])
lines(df[12:14,1],df[12:14,2])
df1 <- data.frame(x = c(12,14,14,12)/40, y = c(0,5,20,25))
lines(df1[1:4,1],df1[1:4,2], lty = 2)
df2 <- data.frame(x = c(40,38,38,40)/40, y = c(0,5,20,25))
lines(df2[,1],df2[,2], lty = 2)
df3 <- data.frame(x = c(6,8,8,6)/40, y = c(0,5,20,25))
lines(df3[,1],df3[,2], lty = 1, lwd = 3, col = "orange" )
df4 <- data.frame(x = c(18,20,20,18)/40, y = c(0,5,20,25))
lines(df4[,1],df4[,2], lty = 1, lwd = 3, col = "blue" )
df5 <- data.frame(x = c(34,32,32,34)/40, y = c(0,5,20,25))
lines(df5[,1],df5[,2], lty = 1, lwd = 3, col = "green" )
df6 <- data.frame(x = c(46,44,44,46)/40, y = c(0,5,20,25))
lines(df6[,1],df6[,2], lty = 1, lwd = 3, col = "red" )
points(0.65, 13, col = "red", pch = 8, cex = 3)
points(0.35, 13, col = "red", pch = 8, cex = 1.5)
points(0.95, 5, col = "red", pch = 8, cex = 1.5)
points(0.65, 13, col = "red", pch = 16, cex = 2.5)
points(0.35, 13, col = "red", pch = 16, cex = 1.5)
points(0.95, 5, col = "red", pch = 16, cex = 1.5)
lines(df[c(6,13),1],df[c(6,13),2], lty = 2)
legend("topright",legend = c("weave conflicts"),
       pch = 16, col = "red", lty = 8, bty = "n")
title(main = "Bottleneck")
axis(side = 1, at = c(0.15), labels = "Lane 1", line = -0.5)
axis(side = 3, at = c(0.45), labels = "Lane 2", line = -0.5)
axis(side = 1, at = c(0.85), labels = "Lane 3", line = -0.5)
axis(side = 3, at = c(1.15), labels = "Lane 4", line = -0.5)
par(op)

```

*** 
__References__